<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Your Files</title>
  <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
</head>
<body>
<main>
  <h1>Your Saved Text Files</h1>
  <p><a href="/">Back</a></p>

  {% if files %}
    <ul>
      {% for f in files %}
        <li>
          <strong>{{ f.filename }}</strong> â€” {{ f.created_at.strftime("%Y-%m-%d %H:%M") }}
          <button onclick="viewFile({{ f.id }})">View</button>
          <a href="/download/{{ f.id }}"><button>Download</button></a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No files yet. Use "Generate Example" on the home page to create one.</p>
  {% endif %}

  <hr>
  <pre id="fileContent" style="white-space: pre-wrap; border:1px solid #ccc; padding:10px;"></pre>
</main>

<script>
async function viewFile(id) {
  const res = await fetch("/files/" + id);
  if (!res.ok) {
    alert("Failed to fetch file: " + res.status);
    return;
  }
  const data = await res.json();
  document.getElementById("fileContent").textContent = data.content;
}
</script>
</body>
</html>
